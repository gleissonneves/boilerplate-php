@function hex-value($hex) {
  $index1: str-index('0123456789abcdef', to-lower-case(str-slice($hex, 1, 1)));
  $index2: str-index('0123456789abcdef', to-lower-case(str-slice($hex, 2, 2)));

  @if not($index1) or not($index2) or $index1 == 0 or $index2 == 0 {
    @return 0;
  }

  @return ($index1 - 1) * 16 + ($index2 - 1);
}



@function hex-to-rgb-string($hex) {
  $hex: if(str-slice($hex, 1, 1) == '#', str-slice($hex, 2), $hex);

  @if (str-length($hex) == 3) {
    $hex: str-slice($hex, 1, 1) + str-slice($hex, 1, 1) +
          str-slice($hex, 2, 2) + str-slice($hex, 2, 2) +
          str-slice($hex, 3, 3) + str-slice($hex, 3, 3);
  }

  $r: hex-value(str-slice($hex, 1, 2));
  $g: hex-value(str-slice($hex, 3, 4));
  $b: hex-value(str-slice($hex, 5, 6));

  @return #{$r}, #{$g}, #{$b};
}
